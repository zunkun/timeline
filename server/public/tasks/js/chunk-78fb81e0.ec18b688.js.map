{"version":3,"sources":["webpack:///./src/views/Project.vue?97ac","webpack:///src/views/Project.vue","webpack:///./src/views/Project.vue?1e80","webpack:///./src/views/Project.vue?e1f5","webpack:///./src/views/Project.vue?3e14"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","span","_v","_s","project","name","gutter","group","on","change","model","value","callback","$$v","$set","expression","_l","progress","key","sequence","slot","title","visible","taskShow","width","update:visible","$event","click","type","staticRenderFns","Projectvue_type_script_lang_js_","components","draggable","vuedraggable_umd_min_default","a","data","baseUrl","projectId","methods","getProject","_getProject","Object","asyncToGenerator","regeneratorRuntime","mark","_callee2","url","_this","wrap","_context2","prev","next","concat","fetch","then","_ref","_callee","res","_context","ok","console","log","abrupt","json","sent","stop","_x","apply","arguments","event","moved","oldIndex","newIndex","bigIndex","element","smallIndex","index","progresses","method","body","stringify_default","headers","content-type","created","_created","_callee3","_context3","$route","params","views_Projectvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Project_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Project_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-78fb81e0.ec18b688.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"project\"}},[_c('el-row',{staticClass:\"p-h\"},[_c('el-col',{attrs:{\"span\":4}},[_vm._v(\"\\n      \"+_vm._s(_vm.project.name)+\"\\n    \")])],1),_c('el-row',{staticClass:\"p-d\",attrs:{\"gutter\":20}},[_c('draggable',{attrs:{\"group\":\"progresses\"},on:{\"change\":_vm.change},model:{value:(_vm.project.progresses),callback:function ($$v) {_vm.$set(_vm.project, \"progresses\", $$v)},expression:\"project.progresses\"}},_vm._l((_vm.project.progresses),function(progress){return _c('el-col',{key:progress.sequence,attrs:{\"span\":6}},[_c('el-card',{staticClass:\"progress-card\"},[_c('div',{staticClass:\"clearfix\",attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',{staticClass:\"p-name\"},[_vm._v(_vm._s(progress.name))]),_c('div',{staticClass:\"p-menu\"},[_c('i',{staticClass:\"el-icon-plus\"}),_c('i',{staticClass:\"el-icon-more\"})])]),_c('div',{staticClass:\"progress-lists\"})])],1)}),1)],1),_c('el-dialog',{attrs:{\"title\":\"提示\",\"visible\":_vm.taskShow,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.taskShow=$event}}},[_c('span',[_vm._v(\"这是一段信息\")]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.taskShow = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.taskShow = false}}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"project\">\n    <el-row class=\"p-h\">\n      <el-col :span=\"4\">\n        {{project.name}}\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" class=\"p-d\">\n      <draggable v-model=\"project.progresses\" group=\"progresses\" @change=\"change\">\n        <el-col :span=\"6\" v-for=\"progress of project.progresses\" :key=\"progress.sequence\">\n          <el-card class=\"progress-card\">\n            <div slot=\"header\" class=\"clearfix\">\n              <div class=\"p-name\">{{progress.name}}</div>\n              <div class=\"p-menu\">\n                <i class=\"el-icon-plus\"></i>\n                <i class=\"el-icon-more\"></i>\n              </div>\n            </div>\n            <div class=\"progress-lists\"></div>\n          </el-card>\n        </el-col>\n      </draggable>\n    </el-row>\n    <el-dialog\n      title=\"提示\"\n      :visible.sync=\"taskShow\"\n      width=\"30%\">\n      <span>这是一段信息</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"taskShow = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"taskShow = false\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import draggable from 'vuedraggable'\n  export default {\n    name: 'Project',\n    components: {\n      draggable\n    },\n    data() {\n      return {\n        baseUrl: '/tasks/api/projects',\n        projectId: '',\n        project: {},\n        taskShow: true\n      }\n    },\n    methods: {\n      async getProject() {\n        let url = `${this.baseUrl}/${this.projectId}`\n        fetch(url).then(async res => {\n          if (!res.ok) {\n            console.log(`获取Project信息失败`);\n            return;\n          }\n          this.project = await res.json();\n        });\n      },\n      change(event) {\n        let url = `${this.baseUrl}/${this.projectId}/progress`\n\n        if (event.moved) {\n          let moved = event.moved;\n          let oldIndex = moved.oldIndex;\n          let newIndex = moved.newIndex;\n          let element = moved.element;\n          let bigIndex = oldIndex > newIndex ? oldIndex: newIndex;\n          let smallIndex = oldIndex > newIndex ? newIndex : oldIndex;\n          for(let index = smallIndex; index <= bigIndex; index ++) {\n            let progress = this.project.progresses[index];\n            fetch(`${url}/${progress.id}`, {\n              method: 'POST',\n              body: JSON.stringify({\n                sequence: index,\n              }),\n              headers: {\n                'content-type': 'application/json'\n              },\n            });\n            this.project.progresses[index].sequence = index;\n          }\n        }\n      }\n    },\n    async created() {\n      this.projectId = this.$route.params.id;\n      await this.getProject();\n    }\n  }\n</script>\n\n<style>\n  #project {\n    margin: 0px;\n  }\n\n  .progress-zpne {\n    padding: 10px 20px;\n  }\n\n  .p-h {\n    border-bottom: solid 1px #CCC;\n    height: 40px;\n  }\n\n  .p-d {\n    padding: 20px;\n  }\n\n  .p-name {\n    float: left;\n  }\n\n  .p-menu {\n    float: right;\n  }\n\n  .clearfix:before,\n  .clearfix:after {\n    display: table;\n    content: \"\";\n  }\n\n  .clearfix:after {\n    clear: both\n  }\n\n  .progress-card {\n    height: calc(100vh - 160px);\n  }\n\n  .progress-card el-card__header {\n    padding: 10px;\n  }\n\n  .p-menu {\n    cursor: pointer;\n  }\n\n  .p-menu i {\n    margin-left: 4px;\n  }\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Project.vue?vue&type=template&id=01201ba2&\"\nimport script from \"./Project.vue?vue&type=script&lang=js&\"\nexport * from \"./Project.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Project.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Project.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}