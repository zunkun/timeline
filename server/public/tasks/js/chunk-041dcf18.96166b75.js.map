{"version":3,"sources":["webpack:///./src/views/Projects.vue?e84a","webpack:///src/views/Projects.vue","webpack:///./src/views/Projects.vue?ebf0","webpack:///./src/views/Projects.vue?ce83","webpack:///./src/views/Projects.vue?beb6"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","span","separator-class","to","name","query","page","_v","_s","size","plain","type","on","click","$event","visible","gutter","_l","project","projectIndex","key","style","border-color","color","shadow","params","edit","description","count","limit","background","layout","page-size","total","current-change","changePage","_e","title","currentProject","width","update:visible","ref","model","rules","label-width","label-position","label","prop","value","callback","$$v","$set","expression","placeholder","projectType","slot","rows","active-color","inactive-color","deleteProject","saveProject","staticRenderFns","Projectsvue_type_script_lang_js_","components","Header","data","baseUrl","projectTypes","enable","currentIndex","projects","required","message","trigger","min","max","pattern","methods","newProject","_this","$refs","projectform","validate","_ref","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","valid","wrap","_context","prev","next","abrupt","promise_default","a","resolve","updateProject","createProject","getProjects","stop","_x","apply","arguments","_updateProject","_callee2","url","_context2","concat","fetch","method","body","stringify_default","headers","content-type","_x2","_createProject","_callee4","_this2","_context4","then","_ref2","_callee3","res","_project","_projects","_context3","ok","json","sent","_x4","_x3","_this3","_this4","_ref3","_callee5","_context5","splice","_x5","$router","push","created","$route","Number","watch","from","views_Projectsvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Projects_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Projects_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-041dcf18.96166b75.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"projects\"}},[_c('Header',[_c('el-row',[_c('el-col',{staticClass:\"head-left\",attrs:{\"span\":20}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ name: 'projects', query: {page: 1} }}},[_vm._v(\"项目\")]),_c('el-breadcrumb-item',[_vm._v(\"项目列表\")]),_c('el-breadcrumb-item',[_vm._v(\"第\"+_vm._s(_vm.page)+\"页\")])],1)],1),_c('el-col',{staticClass:\"head-right\",attrs:{\"span\":4}},[_c('el-button',{attrs:{\"size\":\"small\",\"plain\":\"\",\"type\":\"success\"},on:{\"click\":function($event){_vm.visible=true}}},[_vm._v(\"新增项目\")])],1)],1)],1),_c('el-row',{staticClass:\"project-wrapper\",attrs:{\"gutter\":10}},_vm._l((_vm.projects),function(project,projectIndex){return _c('el-col',{key:project.id,staticClass:\"project-z\",attrs:{\"span\":6}},[_c('el-card',{style:({'border-color': project.color}),attrs:{\"shadow\":\"hover\"}},[_c('div',{staticClass:\"project-title\"},[_c('router-link',{attrs:{\"to\":{name: 'project', params: {id: project.id}}}},[_c('span',{staticClass:\"project-n\"},[_vm._v(_vm._s(project.name))])]),(project.enable)?_c('span',{staticClass:\"project-status\"},[_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"success\"}},[_vm._v(\"使用\")])],1):_c('span',{staticClass:\"project-status\"},[_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"danger\"}},[_vm._v(\"归档\")])],1),_c('span',{staticClass:\"project-button\",on:{\"click\":function($event){return _vm.edit(project, projectIndex)}}},[_vm._v(\"编辑\")])],1),_c('p',[_c('span',{staticClass:\"project-d\"},[_vm._v(_vm._s(project.description))])])])],1)}),1),(_vm.count>_vm.limit)?_c('el-row',{staticClass:\"page-bottom\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"page-size\":_vm.limit,\"total\":_vm.count},on:{\"current-change\":_vm.changePage}})],1):_vm._e(),_c('el-dialog',{attrs:{\"title\":_vm.currentProject.title ||'项目编辑',\"visible\":_vm.visible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"projectform\",attrs:{\"model\":_vm.currentProject,\"rules\":_vm.rules,\"label-width\":\"80px\",\"label-position\":\"right\",\"id\":\"projectform\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\",\"prop\":\"name\"}},[_c('el-input',{model:{value:(_vm.currentProject.name),callback:function ($$v) {_vm.$set(_vm.currentProject, \"name\", $$v)},expression:\"currentProject.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"类别\",\"prop\":\"type\"}},[_c('el-select',{attrs:{\"placeholder\":\"选择类别\"},model:{value:(_vm.currentProject.type),callback:function ($$v) {_vm.$set(_vm.currentProject, \"type\", $$v)},expression:\"currentProject.type\"}},_vm._l((this.projectTypes),function(projectType){return _c('el-option',{key:projectType.type,attrs:{\"label\":projectType.name,\"value\":projectType.type}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"颜色\",\"prop\":\"color\"}},[_c('el-input',{staticClass:\"color-i\",attrs:{\"placeholder\":\"输入颜色\"},model:{value:(_vm.currentProject.color),callback:function ($$v) {_vm.$set(_vm.currentProject, \"color\", $$v)},expression:\"currentProject.color\"}},[_c('template',{slot:\"append\"},[_c('el-color-picker',{staticClass:\"color-p\",model:{value:(_vm.currentProject.color),callback:function ($$v) {_vm.$set(_vm.currentProject, \"color\", $$v)},expression:\"currentProject.color\"}})],1)],2)],1),_c('el-form-item',{attrs:{\"label\":\"说明\",\"prop\":\"description\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.currentProject.description),callback:function ($$v) {_vm.$set(_vm.currentProject, \"description\", $$v)},expression:\"currentProject.description\"}})],1),_c('el-form-item',{attrs:{\"label\":\"启用\"}},[_c('el-switch',{attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},model:{value:(_vm.currentProject.enable),callback:function ($$v) {_vm.$set(_vm.currentProject, \"enable\", $$v)},expression:\"currentProject.enable\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[(_vm.currentProject.id)?_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.deleteProject}},[_vm._v(\"删 除\")]):_vm._e(),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\",\"plain\":\"\"},on:{\"click\":function($event){_vm.visible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\",\"plain\":\"\"},on:{\"click\":_vm.saveProject}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"projects\">\n    <Header>\n      <el-row>\n        <el-col :span=\"20\" class=\"head-left\">\n          <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n            <el-breadcrumb-item :to=\"{ name: 'projects', query: {page: 1} }\">项目</el-breadcrumb-item>\n            <el-breadcrumb-item>项目列表</el-breadcrumb-item>\n            <el-breadcrumb-item>第{{page}}页</el-breadcrumb-item>\n          </el-breadcrumb>\n        </el-col>\n        <el-col :span=\"4\" class=\"head-right\">\n          <el-button size=\"small\" plain type=\"success\" @click=\"visible=true\">新增项目</el-button>\n        </el-col>\n      </el-row>\n    </Header>\n    <el-row :gutter=\"10\" class=\"project-wrapper\">\n      <el-col :span=\"6\" v-for=\"(project, projectIndex) in projects\" :key=\"project.id\" class=\"project-z\">\n        <el-card shadow=\"hover\" :style=\"{'border-color': project.color}\">\n          <div class=\"project-title\">\n            <router-link :to=\"{name: 'project', params: {id: project.id}}\">\n              <span class=\"project-n\">{{project.name}}</span>\n            </router-link>\n            <span class=\"project-status\" v-if=\"project.enable\"><el-tag size=\"mini\" type=\"success\">使用</el-tag></span>\n            <span class=\"project-status\" v-else><el-tag size=\"mini\" type=\"danger\">归档</el-tag></span>\n            <span class=\"project-button\" @click=\"edit(project, projectIndex)\">编辑</span>\n          </div>\n          <p><span class=\"project-d\">{{project.description}}</span></p>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-row v-if=\"count>limit\" class=\"page-bottom\">\n      <el-pagination background layout=\"prev, pager, next\" @current-change=\"changePage\" :page-size=\"limit\"\n        :total=\"count\">\n      </el-pagination>\n    </el-row>\n    <el-dialog :title=\"currentProject.title ||'项目编辑'\" :visible.sync=\"visible\" width=\"50%\">\n      <el-form ref=\"projectform\" :model=\"currentProject\" :rules=\"rules\" label-width=\"80px\" label-position=\"right\"\n        id=\"projectform\">\n        <el-form-item label=\"名称\" prop=\"name\">\n          <el-input v-model=\"currentProject.name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"类别\" prop=\"type\">\n          <el-select v-model=\"currentProject.type\" placeholder=\"选择类别\">\n            <el-option :label=\"projectType.name\" :value=\"projectType.type\" v-for=\"projectType in this.projectTypes\"\n              :key=\"projectType.type\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"颜色\" prop=\"color\">\n          <el-input placeholder=\"输入颜色\" v-model=\"currentProject.color\" class=\"color-i\">\n            <template slot=\"append\">\n              <el-color-picker v-model=\"currentProject.color\" class=\"color-p\"></el-color-picker>\n            </template>\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"说明\" prop=\"description\">\n          <el-input type=\"textarea\" :rows=\"3\" v-model=\"currentProject.description\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"启用\">\n          <el-switch v-model=\"currentProject.enable\" active-color=\"#13ce66\" inactive-color=\"#ff4949\"></el-switch>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button size=\"small\" type=\"danger\" plain @click=\"deleteProject\" v-if=\"currentProject.id\">删 除</el-button>\n        <el-button size=\"small\" type=\"warning\" plain @click=\"visible = false\">取 消</el-button>\n        <el-button size=\"small\" type=\"success\" plain @click=\"saveProject\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import Header from '../components/Header'\n  export default {\n    name: 'projects',\n    components: {\n      Header\n    },\n    data() {\n      return {\n        baseUrl: '/tasks/api/projects',\n        visible: false,\n        projectTypes: [{\n            type: 'project',\n            name: '项目'\n          },\n          {\n            type: 'work',\n            name: '工作'\n          },\n          {\n            type: 'family',\n            name: '家庭'\n          },\n          {\n            type: 'life',\n            name: '生活'\n          },\n          {\n            type: 'skills',\n            name: '技能'\n          }\n        ],\n        currentProject: {\n          color: '#cf9236',\n          type: 'project',\n          enable: true,\n        },\n        currentIndex: 0,\n        projects: [],\n        rules: {\n          name: [{\n              required: true,\n              message: '请输入项目名称',\n              trigger: 'blur'\n            },\n            {\n              min: 2,\n              max: 20,\n              message: '长度在 2 到 20 个字符',\n              trigger: 'blur'\n            }\n          ],\n          type: [{\n            required: true,\n            message: '请选择类型',\n            trigger: 'blur',\n          }],\n          color: [{\n            required: true,\n            message: '输入颜色',\n            trigger: 'blur'\n          }, {\n            type: 'string',\n            pattern: /^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/,\n            message: '请输入正确的hex颜色值',\n            trigger: 'blur'\n          }],\n          description: [{\n              required: true,\n              message: '请输入项目说明',\n              trigger: 'blur'\n            },\n            {\n              min: 2,\n              message: '至少个字符',\n              trigger: 'blur'\n            }\n          ],\n        },\n        page: 1,\n        limit: 20,\n        count: 0,\n      }\n    },\n    methods: {\n      newProject() {\n        this.currentProject = {\n          color: '#cf9236',\n          type: 'project',\n          enable: true\n        };\n        this.visible = false;\n        this.currentIndex = 0;\n      },\n      saveProject() {\n        this.$refs.projectform.validate(async valid => {\n          if (!valid) return Promise.resolve();\n          if (this.currentProject.id) {\n            await this.updateProject(this.currentProject);\n          } else {\n            await this.createProject(this.currentProject);\n            this.getProjects();\n          }\n          this.newProject();\n        })\n      },\n     async updateProject(project) {\n        let url = `${this.baseUrl}/${project.id}`;\n        return fetch(url, {\n          method: 'PUT',\n          body: JSON.stringify(project),\n          headers: {\n            'content-type': 'application/json'\n          },\n        });\n      },\n      async createProject(project) {\n        let url = `${this.baseUrl}/`;\n        return fetch(url, {\n            method: 'POST',\n            body: JSON.stringify(project),\n            headers: {\n              'content-type': 'application/json'\n            },\n          })\n          .then(async res => {\n            if (res.ok) {\n              let _project = await res.json();\n              let _projects = [_project];\n              this.projects = _projects.concat(this.projects);\n            }\n          });\n      },\n      getProjects(type) {\n        let url = `${this.baseUrl}/?limit=${this.limit}&page=${this.page}`\n        if (type) {\n          url = `${url}&type=${type}`\n        }\n        fetch(url)\n          .then(res => {\n            if (res.ok) {\n              return res.json();\n            }\n            throw '获取项目列表失败';\n          })\n          .then(data => {\n            if (!data) return;\n            this.count = data.count || 0;\n            this.projects = data.rows || [];\n          })\n      },\n      edit(project, projectIndex) {\n        this.projectIndex = projectIndex || 0;\n        this.currentProject = project;\n        this.visible = true;\n      },\n      deleteProject() {\n        if (!this.currentProject.id) return;\n        let url = `${this.baseUrl}/${this.currentProject.id}`;\n        fetch(url, {\n            method: 'DELETE'\n          })\n          .then(async res => {\n            if (res.ok) {\n              this.projects.splice(this.currentIndex, 1);\n              this.newProject()\n            }\n          });\n      },\n\n      changePage(page) {\n        this.page = page;\n        this.$router.push({\n          query: {\n            page\n          }\n        })\n      }\n    },\n    created() {\n      let query = this.$route.query;\n      this.page = Number(query.page) || 1;\n      this.limit = Number(query.limit) || 20;\n      this.type = Number(query.type) || ''\n      this.getProjects();\n    },\n    watch: {\n      '$route'(to, from) {\n        if (to.query.page !== from.params.page) {\n          this.page = Number(to.query.page) || 1;\n          this.getProjects();\n        }\n      }\n    }\n  }\n</script>\n\n<style>\n  #projects {\n    padding-bottom: 20px;\n  }\n\n  .p-head {\n    text-align: right;\n    padding: 4px;\n  }\n\n  #projectform {\n    margin-right: 4px;\n  }\n\n  .el-select {\n    width: 100%;\n  }\n\n  .el-color-picker__color {\n    border: 0px;\n  }\n\n  .el-color-picker__trigger {\n    padding: 0;\n    border: none;\n  }\n\n  .color-d {\n    height: 24px;\n    cursor: pointer;\n    border-radius: 2px;\n  }\n\n  .el-input-group__append,\n  .el-input-group__prepend {\n    padding: 0;\n    background-color: #fff;\n    border: none;\n  }\n\n\n  .project-wrapper {\n    padding: 10px;\n    margin: 0px !important;\n  }\n\n  .project-z {\n    margin-top: 10px;\n    padding: 0px 10px;\n    cursor: pointer;\n  }\n\n  .project-n {\n    color: #67C23A;\n    font-size: 1.2rem;\n  }\n\n  .project-d {\n    font-size: 0.8rem;\n    max-width: 20px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n  .project-button {\n    float: right;\n    color: #E6A23C;\n    font-size: 0.8rem;\n  }\n\n  .project-status {\n    font-size:0.8rem;\n    margin-left:10px;\n  }\n\n  .e-card {\n    cursor: pointer;\n  }\n\n  .el-card__body {\n    padding: 10px;\n  }\n\n  a {\n    text-decoration: none;\n  }\n\n  .page-bottom {\n    text-align: right;\n  }\n\n  .head-left {\n    float: left;\n  }\n\n  .head-right {\n    float: right;\n    text-align: right;\n  } \n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Projects.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Projects.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Projects.vue?vue&type=template&id=0df57606&\"\nimport script from \"./Projects.vue?vue&type=script&lang=js&\"\nexport * from \"./Projects.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Projects.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Projects.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Projects.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}